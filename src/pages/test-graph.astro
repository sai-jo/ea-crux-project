---
// Test page for CauseEffectGraph iteration
import CauseEffectGraph from '../components/CauseEffectGraph';
---
<html>
<head>
  <title>Graph Test</title>
  <style>
    body { margin: 0; padding: 0; background: #1a1a2e; }
    .container { width: 100vw; height: 100vh; }
  </style>
</head>
<body>
  <div class="container">
    <CauseEffectGraph
      client:load
      height="100vh"
      initialNodes={[
        // Leaf Parameters (green)
        { id: 'rsi', data: { label: 'Recursive Self-Improvement', type: 'leaf', confidence: 0.6, confidenceLabel: 'severity' } },
        { id: 'alignment', data: { label: 'Alignment Robustness', type: 'leaf', confidence: 0.55, confidenceLabel: 'current level' } },
        { id: 'interp', data: { label: 'Interpretability', type: 'leaf', confidence: 0.4, confidenceLabel: 'current level' } },
        { id: 'safety-gap', data: { label: 'Safety-Capability Gap', type: 'leaf', confidence: 0.35, confidenceLabel: 'gap size' } },
        { id: 'oversight', data: { label: 'Human Oversight Quality', type: 'leaf', confidence: 0.5, confidenceLabel: 'current level' } },
        { id: 'concentration', data: { label: 'AI Control Concentration', type: 'leaf', confidence: 0.65, confidenceLabel: 'concentration' } },
        { id: 'safety-culture', data: { label: 'Safety Culture', type: 'leaf', confidence: 0.45, confidenceLabel: 'current level' } },
        { id: 'info-auth', data: { label: 'Information Authenticity', type: 'leaf', confidence: 0.4, confidenceLabel: 'current level' } },
        { id: 'intl-coord', data: { label: 'International Coordination', type: 'leaf', confidence: 0.3, confidenceLabel: 'current level' } },
        { id: 'expertise', data: { label: 'Human Expertise', type: 'leaf', confidence: 0.55, confidenceLabel: 'retention' } },
        { id: 'trust', data: { label: 'Societal Trust', type: 'leaf', confidence: 0.45, confidenceLabel: 'current level' } },
        { id: 'agency', data: { label: 'Human Agency', type: 'leaf', confidence: 0.5, confidenceLabel: 'current level' } },

        // Aggregate Parameters (gray)
        { id: 'threat', data: { label: 'Threat Environment', type: 'cause', confidence: 0.65, confidenceLabel: 'severity' } },
        { id: 'tech-safety', data: { label: 'Technical Safety', type: 'cause', confidence: 0.55, confidenceLabel: 'current level' } },
        { id: 'gov', data: { label: 'Governance Capacity', type: 'cause', confidence: 0.45, confidenceLabel: 'current level' } },
        { id: 'epistemic', data: { label: 'Epistemic Foundation', type: 'cause', confidence: 0.5, confidenceLabel: 'current level' } },
        { id: 'adapt', data: { label: 'Societal Adaptability', type: 'cause', confidence: 0.45, confidenceLabel: 'current level' } },

        // Critical Outcomes - Upstream (blue)
        { id: 'rogue-catastrophe', data: { label: 'Rogue Actor Catastrophe', type: 'intermediate', confidence: 0.08, confidenceLabel: 'probability estimate' } },
        { id: 'fast-takeover', data: { label: 'Rapid AI Takeover', type: 'intermediate', confidence: 0.12, confidenceLabel: 'probability estimate' } },
        { id: 'state-catastrophe', data: { label: 'State-Caused Catastrophe', type: 'intermediate', confidence: 0.15, confidenceLabel: 'probability estimate' } },
        { id: 'slow-takeover', data: { label: 'Gradual AI Takeover', type: 'intermediate', confidence: 0.25, confidenceLabel: 'probability estimate' } },
        { id: 'turb', data: { label: 'Transition Turbulence', type: 'intermediate', confidence: 0.7, confidenceLabel: 'likelihood of significant turbulence' } },

        // Critical Outcomes - Downstream (blue)
        { id: 'lock-in', data: { label: 'Value Lock-in', type: 'intermediate', confidence: 0.5, confidenceLabel: 'probability of some lock-in' } },
        { id: 'epist-quality', data: { label: 'Epistemic Quality', type: 'intermediate', confidence: 0.5, confidenceLabel: 'symmetric uncertainty' } },
        { id: 'power-trans', data: { label: 'Power Transition', type: 'intermediate', confidence: 0.5, confidenceLabel: 'uncertainty about character' } },

        // Ultimate Outcomes (yellow)
        { id: 'acute', data: { label: 'Acute Risk', type: 'effect', confidence: 0.25, confidenceLabel: 'aggregate probability' } },
        { id: 'value', data: { label: 'Long-run Value', type: 'effect', confidence: 0.5, confidenceLabel: 'high uncertainty' } },
      ]}
      initialEdges={[
        // Leaf → Aggregate
        { id: 'e-rsi-threat', source: 'rsi', target: 'threat', data: { strength: 'strong', effect: 'increases' } },
        { id: 'e-alignment-tech', source: 'alignment', target: 'tech-safety', data: { strength: 'strong', effect: 'decreases' } },
        { id: 'e-interp-tech', source: 'interp', target: 'tech-safety', data: { strength: 'medium', effect: 'decreases' } },
        { id: 'e-gap-threat', source: 'safety-gap', target: 'threat', data: { strength: 'strong', effect: 'increases' } },
        { id: 'e-oversight-gov', source: 'oversight', target: 'gov', data: { strength: 'medium', effect: 'decreases' } },
        { id: 'e-concentration-gov', source: 'concentration', target: 'gov', data: { strength: 'medium', effect: 'increases' } },
        { id: 'e-culture-tech', source: 'safety-culture', target: 'tech-safety', data: { strength: 'medium', effect: 'decreases' } },
        { id: 'e-auth-epistemic', source: 'info-auth', target: 'epistemic', data: { strength: 'medium', effect: 'decreases' } },
        { id: 'e-intl-gov', source: 'intl-coord', target: 'gov', data: { strength: 'strong', effect: 'decreases' } },
        { id: 'e-expertise-adapt', source: 'expertise', target: 'adapt', data: { strength: 'medium', effect: 'decreases' } },
        { id: 'e-trust-epistemic', source: 'trust', target: 'epistemic', data: { strength: 'medium', effect: 'decreases' } },
        { id: 'e-agency-adapt', source: 'agency', target: 'adapt', data: { strength: 'medium', effect: 'decreases' } },

        // Aggregate → Critical Outcomes (upstream)
        { id: 'e-threat-rogue', source: 'threat', target: 'rogue-catastrophe', data: { strength: 'strong', effect: 'increases' } },
        { id: 'e-threat-fast', source: 'threat', target: 'fast-takeover', data: { strength: 'strong', effect: 'increases' } },
        { id: 'e-tech-fast', source: 'tech-safety', target: 'fast-takeover', data: { strength: 'strong', effect: 'increases', label: 'low +' } },
        { id: 'e-tech-slow', source: 'tech-safety', target: 'slow-takeover', data: { strength: 'medium', effect: 'increases', label: 'low +' } },
        { id: 'e-threat-state', source: 'threat', target: 'state-catastrophe', data: { strength: 'strong', effect: 'increases', label: 'high +' } },
        { id: 'e-gov-state', source: 'gov', target: 'state-catastrophe', data: { strength: 'medium', effect: 'increases', label: 'low +' } },
        { id: 'e-gov-slow', source: 'gov', target: 'slow-takeover', data: { strength: 'medium', effect: 'increases', label: 'low +' } },
        { id: 'e-epistemic-slow', source: 'epistemic', target: 'slow-takeover', data: { strength: 'weak', effect: 'increases', label: 'low +' } },
        { id: 'e-adapt-turb', source: 'adapt', target: 'turb', data: { strength: 'strong', effect: 'increases', label: 'low +' } },

        // Aggregate → Critical Outcomes (downstream)
        { id: 'e-gov-lock', source: 'gov', target: 'lock-in', data: { strength: 'medium', effect: 'increases', label: 'shapes' } },
        { id: 'e-epistemic-epist', source: 'epistemic', target: 'epist-quality', data: { strength: 'strong', effect: 'increases', label: 'shapes' } },
        { id: 'e-adapt-lock', source: 'adapt', target: 'lock-in', data: { strength: 'medium', effect: 'increases', label: 'low +' } },
        { id: 'e-adapt-power', source: 'adapt', target: 'power-trans', data: { strength: 'medium', effect: 'increases', label: 'shapes' } },

        // Cross-links between Critical Outcomes
        { id: 'e-turb-state', source: 'turb', target: 'state-catastrophe', data: { strength: 'weak', effect: 'increases', label: 'can trigger' } },
        { id: 'e-state-lock', source: 'state-catastrophe', target: 'lock-in', data: { strength: 'medium', effect: 'increases', label: 'can cause' } },
        { id: 'e-slow-lock', source: 'slow-takeover', target: 'lock-in', data: { strength: 'medium', effect: 'increases' } },

        // Critical Outcomes → Ultimate Outcomes
        { id: 'e-rogue-acute', source: 'rogue-catastrophe', target: 'acute', data: { strength: 'strong', effect: 'increases' } },
        { id: 'e-fast-acute', source: 'fast-takeover', target: 'acute', data: { strength: 'strong', effect: 'increases' } },
        { id: 'e-state-acute', source: 'state-catastrophe', target: 'acute', data: { strength: 'strong', effect: 'increases' } },
        { id: 'e-slow-acute', source: 'slow-takeover', target: 'acute', data: { strength: 'medium', effect: 'increases' } },
        { id: 'e-turb-acute', source: 'turb', target: 'acute', data: { strength: 'medium', effect: 'increases', label: 'triggers' } },
        { id: 'e-lock-acute', source: 'lock-in', target: 'acute', data: { strength: 'medium', effect: 'increases', label: 'bad lock-in' } },
        { id: 'e-slow-value', source: 'slow-takeover', target: 'value', data: { strength: 'medium', effect: 'increases' } },
        { id: 'e-turb-value', source: 'turb', target: 'value', data: { strength: 'medium', effect: 'increases', label: 'path dependence' } },
        { id: 'e-lock-value', source: 'lock-in', target: 'value', data: { strength: 'strong', effect: 'increases' } },
        { id: 'e-epist-value', source: 'epist-quality', target: 'value', data: { strength: 'medium', effect: 'increases' } },
        { id: 'e-power-value', source: 'power-trans', target: 'value', data: { strength: 'medium', effect: 'increases' } },
      ]}
    />
  </div>
</body>
</html>
